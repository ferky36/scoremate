/* Lightweight styles for Match Recap modal/button */
.recap-btn{display:inline-flex;align-items:center;gap:.5rem;padding:.6rem 1rem;border-radius:.75rem;background:linear-gradient(90deg,#6366f1,#22c55e);color:#fff;font-weight:600;border:none;box-shadow:0 4px 12px rgba(0,0,0,.12)}
.recap-btn:hover{filter:brightness(1.05)}

.recap-overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);display:flex;align-items:flex-start;justify-content:center;opacity:0;transition:opacity .15s ease;z-index:60}
.recap-overlay.open{opacity:1}
.recap-panel{width:min(1240px,96%);margin-top:2.5rem;background:var(--recap-bg,#ffffff);color:var(--recap-fg,#0f172a);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.18);overflow:hidden;
  /* default (light) tokens used by all child cards */
  --recap-card-bg:#fafafa;/* card surface */
  --recap-card-brd:#e5e7eb;/* card border */
  --recap-muted:#6b7280;/* muted text */
  --insight-card-bg:#f7fafc;
  --insight-card-brd:#d9e1ea;
  --insight-row:#eef2f7;
  --insight-muted:#556177;
  --insight-accent:#84cc16;
  --insight-good:#16a34a;
  --insight-warn:#f5c542;
  --insight-bad:#ef4444;
  --insight-chip:rgba(132,204,22,.12);
  --insight-shadow:0 10px 26px rgba(15,23,42,.06);
}
.recap-inline-shell{
  --recap-card-bg:#fafafa;
  --recap-card-brd:#e5e7eb;
  --recap-muted:#6b7280;
  --insight-card-bg:#f7fafc;
  --insight-card-brd:#d9e1ea;
  --insight-row:#eef2f7;
  --insight-muted:#556177;
  --insight-accent:#84cc16;
  --insight-good:#16a34a;
  --insight-warn:#f5c542;
  --insight-bad:#ef4444;
  --insight-chip:rgba(132,204,22,.12);
  --insight-shadow:0 10px 26px rgba(15,23,42,.06);
  color:inherit;
}
.dark .recap-panel{
  --recap-bg:#0f172a;/* panel bg */
  --recap-fg:#e5e7eb;/* panel fg */
  --recap-card-bg:#151a22;/* dark card surface */
  --recap-card-brd:rgba(148,163,184,.22);/* dark card border */
  --recap-muted:rgba(148,163,184,.85);
  --insight-card-bg:#111a2b;
  --insight-card-brd:rgba(255,255,255,.08);
  --insight-row:#172337;
  --insight-muted:#94a3b8;
  --insight-accent:#bef264;
  --insight-good:#22c55e;
  --insight-warn:#f4c746;
  --insight-bad:#f87171;
  --insight-chip:rgba(190,242,100,.14);
  --insight-shadow:0 12px 30px rgba(0,0,0,.42);
}
.dark .recap-inline-shell{
  --recap-bg:#0f172a;
  --recap-fg:#e5e7eb;
  --recap-card-bg:#151a22;
  --recap-card-brd:rgba(148,163,184,.22);
  --recap-muted:rgba(148,163,184,.85);
  --insight-card-bg:#111a2b;
  --insight-card-brd:rgba(255,255,255,.08);
  --insight-row:#172337;
  --insight-muted:#94a3b8;
  --insight-accent:#bef264;
  --insight-good:#22c55e;
  --insight-warn:#f4c746;
  --insight-bad:#f87171;
  --insight-chip:rgba(190,242,100,.14);
  --insight-shadow:0 12px 30px rgba(0,0,0,.42);
}

.recap-header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-bottom:1px solid rgba(148,163,184,.25)}
.recap-title{font-size:1.1rem;font-weight:700}
.recap-actions{display:flex;gap:.5rem}
.recap-action{padding:.45rem .8rem;border-radius:.6rem;background:transparent;border:1px solid rgba(148,163,184,.5);color:inherit}
.recap-action:hover{background:rgba(148,163,184,.15)}

.recap-body{padding:1rem 1.25rem;max-height:70vh;overflow:auto}
.recap-titlebar{font-size:1.6rem;font-weight:800;margin-bottom:.9rem}
.recap-hdr{margin-bottom:.75rem}
.recap-hdr-title{font-weight:700}
.recap-hdr-sub{font-size:.85rem;opacity:.75}

.recap-cards{display:grid;grid-template-columns:repeat(1,1fr);gap:.9rem;margin:.2rem 0 1.1rem}
@media(min-width:640px){.recap-cards{grid-template-columns:repeat(2,1fr)}}
@media(min-width:1024px){.recap-cards{grid-template-columns:repeat(4,1fr)}}
.recap-card{padding:1rem;border:1px solid var(--recap-card-brd);border-radius:14px;background:var(--recap-card-bg)}
.recap-card-val{font-size:1.6rem;font-weight:800}
.recap-card-label{opacity:.8;margin-top:.15rem;color:var(--recap-muted)}

.recap-grid{display:grid;grid-template-columns:1fr;gap:1rem}
@media(min-width:1024px){.recap-grid{grid-template-columns:2fr 1fr}}
.recap-section-title{font-weight:700;margin:.5rem 0 .5rem}
.recap-match-wrap{display:grid;grid-template-columns:1fr;gap:.8rem}
@media(min-width:900px){.recap-match-wrap{grid-template-columns:1fr 1fr}}
.recap-match-card{padding:.95rem;border:1px solid var(--recap-card-brd);border-radius:14px;background:var(--recap-card-bg);display:flex;flex-direction:column}
.rmc-top{display:flex;justify-content:space-between;font-size:.82rem;opacity:.8;margin-bottom:.5rem}
.rmc-mid{display:grid;grid-template-columns:1fr auto 1fr;align-items:end;gap:.6rem;width:100%;}
.rmc-team-block{min-width:0}
.rmc-team-block.right{text-align:right}
.rmc-team-label{font-size:.68rem;letter-spacing:.04em;font-weight:700;margin-bottom:.2rem;opacity:.9;color:var(--recap-muted)}
.label-a{color:#34d399}
.label-b{color:#93c5fd}
.rmc-team{opacity:.92;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.recap-overlay{padding:12px}
@media(max-width:640px){
  .rmc-team{white-space:normal}
}
.rmc-vs{opacity:.7;text-align:center}
.rmc-score{display:flex;justify-content:space-between;align-items:flex-start;margin:.6rem 0 .2rem}
.rmc-sa,.rmc-sb{font-size:2.1rem;font-weight:800;min-width:2ch}
.rmc-sa{text-align:left}
.rmc-sb{text-align:right}
.rmc-tags{margin-top:auto;display:flex;gap:.4rem;padding-top:.35rem}
.rmc-badge{display:inline-flex;align-items:center;font-size:.72rem;padding:.24rem .6rem;border-radius:999px;border:1px solid rgba(148,163,184,.25);background:var(--badge-bg,#eef2ff);color:var(--badge-fg,#1f2937)}
.rmc-badge.neutral{--badge-bg:rgba(148,163,184,.12);--badge-fg:var(--recap-muted);border-color:rgba(148,163,184,.28)}
.badge-a{--badge-bg:#065f46;--badge-fg:#d1fae5;border-color:#065f46}
.badge-b{--badge-bg:#0b4c95;--badge-fg:#dbeafe;border-color:#0b4c95}
.badge-d{--badge-bg:#374151;--badge-fg:#e5e7eb}
.recap-empty{opacity:.7;padding:.6rem 0}

.recap-standings{border:1px solid var(--recap-card-brd);border-radius:14px;overflow:hidden;background:var(--recap-card-bg)}
.recap-standings table{width:100%;border-collapse:collapse}
.recap-standings thead tr{background:rgba(0,0,0,.03)}
.dark .recap-standings thead tr{background-color:rgba(255,255,255,.04)}
.recap-standings th,.recap-standings td{padding:.55rem .65rem;border-bottom:1px solid rgba(148,163,184,.2);text-align:left;font-size:.9rem;color:inherit}
.recap-standings td:nth-child(n+3),.recap-standings th:nth-child(n+3){text-align:right}
.recap-standings td.pos{color:#10b981}
.recap-standings td.neg{color:#ef4444}
.recap-standings .diff-pos{color:#10b981}
.recap-standings .diff-neg{color:#ef4444}
.recap-standings .wr-high{color:#10b981}
.recap-standings .wr-low{color:#ef4444}
/* Mobile: standings scrolls horizontally (not vertically) */
@media(max-width:640px){
  /* Keep all sections within modal width; prevent horizontal scroll globally */
  .recap-body{overflow-x:hidden}
  /* Allow grid track to shrink (avoid min-content sizing pushing width) */
  .recap-grid{grid-template-columns:minmax(0,1fr)}
  .recap-grid, .recap-col-left, .recap-col-right, .recap-match-wrap, .recap-standings{min-width:0}
  .recap-col-left, .recap-col-right{width:100%; max-width:100%; overflow:visible}
  .recap-match-wrap, .recap-match-card, .cardlike{width:100%; max-width:100%; box-sizing:border-box}
  /* Ensure match cards fully fit the viewport width */
  .recap-match-card{overflow:hidden}
  /* Keep the same grid columns on mobile but allow wrapping inside the team blocks */
  .rmc-mid{display:grid;grid-template-columns:1fr auto 1fr;align-items:end;gap:.6rem;width:100%}
  .rmc-team{word-break:break-word; overflow-wrap:anywhere}

  /* Only standings can scroll horizontally */
  .recap-standings{display:block; width:100%; overflow-x:auto; overflow-y:visible; max-height:none; -webkit-overflow-scrolling:touch}
  .recap-standings table{min-width:640px; width:640px}
  .recap-standings thead th{position:sticky; top:0; background:inherit}
}

.recap-insight-box{margin-top:.5rem;border:1px solid var(--recap-card-brd,#e5e7eb);border-radius:14px;background:var(--recap-card-bg,#fafafa);padding:.7rem .9rem}
.recap-insight{margin:.2rem 0 .2rem 1rem;color:var(--recap-muted);list-style:disc}
.recap-notes-full strong{color:inherit;font-weight:700}
.recap-insight li{margin:.25rem 0}

.recap-updated{opacity:.6;font-size:.85rem;margin-top:1.2rem}
.cardlike{border:1px solid var(--recap-card-brd);border-radius:14px;background:var(--recap-card-bg);padding:.8rem .9rem}
.recap-bottom-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:6px}
@media(max-width:980px){.recap-bottom-grid{grid-template-columns:1fr}}
.recap-rules ol{margin:0;padding-left:18px;color:var(--recap-muted);list-style:decimal}
.recap-insight{margin:.2rem 0 .2rem 1rem;color:var(--recap-muted);list-style:disc}
.recap-insight-box.cardlike{padding:.8rem .9rem}

/* --- New recap insight layout (reference design) --- */
.recap-insight-section{margin-top:1rem}
.recap-insight-heading{margin-bottom:.5rem}
.rih-title{font-size:2rem;font-weight:800;color:inherit}
.rih-subtitle{font-size:1rem;color:var(--insight-muted);margin-top:.1rem;font-weight:600}
.rih-line{height:1px;background:rgba(148,163,184,.24);margin-top:.7rem;margin-bottom:.6rem}
.recap-insight-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem}
.recap-insight-card{background:var(--insight-card-bg);border:1px solid var(--insight-card-brd);border-radius:18px;padding:1rem 1.05rem;box-shadow:var(--insight-shadow,none);color:inherit}
.insight-card-title{display:flex;align-items:center;gap:.55rem;font-weight:800;margin-bottom:.9rem}
.insight-icon{width:1.8rem;height:1.8rem;display:inline-flex;align-items:center;justify-content:center;border-radius:12px;background:var(--insight-chip);color:var(--insight-accent);font-size:1rem}
.insight-player-list{display:flex;flex-direction:column;gap:.55rem}
.insight-player-row{display:flex;align-items:center;justify-content:space-between;background:var(--insight-row);border-radius:16px;padding:.85rem;border:1px solid rgba(255,255,255,.04)}
.insight-player-row.is-lead{border-color:rgba(132,204,22,.35);box-shadow:inset 0 0 0 1px rgba(132,204,22,.25)}
.insight-player-row.is-muted{opacity:.75}
.insight-player-row.is-muted .score-main{color:var(--insight-muted)}
.insight-player-row.is-muted .p-stat-diff{color:var(--insight-muted)}
.insight-player-info{display:flex;align-items:center;gap:.65rem;min-width:0}
.insight-avatar{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,var(--insight-accent),#10b981);color:#0f172a;font-weight:800;display:flex;align-items:center;justify-content:center}
.dark .insight-avatar{color:#0f172a}
.recap-insight-card .p-name{font-weight:700;color:inherit}
.recap-insight-card .p-stat{color:var(--insight-muted);font-size:.8rem}
.p-stat-diff{color:var(--insight-good);font-weight:700}
.p-stat-diff.neg{color:var(--insight-bad)}
.insight-score{text-align:right}
.recap-insight-card .score-main{font-weight:800;font-size:1.45rem;color:var(--insight-accent)}
.recap-insight-card .score-sub{font-size:.8rem;color:var(--insight-muted)}
.recap-insight-card .score-sub.pos{color:var(--insight-good)}
.recap-insight-card .score-sub.neg{color:var(--insight-bad)}
.insight-pairing-wrap{display:flex;flex-direction:column;gap:.65rem}
.pairing-box.insight-pairing{background:var(--insight-row);border:1px solid rgba(255,255,255,.04);border-radius:14px;padding:.75rem .85rem;color:inherit}
.pair-low{color:var(--insight-bad);font-weight:800}
.pair-high{color:var(--insight-good);font-weight:800}
.pair-arrow{color:var(--insight-muted);margin:0 .4rem;font-size:1rem;font-weight:700}
.reason{display:block;color:var(--insight-muted);font-size:.8rem;margin-top:.25rem;font-style:italic}
.pair-perf-list{display:flex;flex-direction:column;gap:.65rem}
.pair-perf-row{background:var(--insight-row);border:1px solid rgba(255,255,255,.04);border-radius:14px;padding:.75rem .85rem;position:relative}
.pair-perf-row.is-bad{border-color:rgba(239,68,68,.2)}
.pair-perf-title{font-weight:800;color:inherit;margin-bottom:.05rem}
.pair-perf-title.pair-perf-best{color:var(--insight-good)}
.pair-perf-title.pair-perf-bad{color:var(--insight-bad)}
.pair-perf-names{color:inherit;font-weight:700;margin-bottom:.1rem}
.pair-perf-meta{color:var(--insight-muted);font-size:.82rem}
.pair-perf-score{position:absolute;right:.85rem;top:50%;transform:translateY(-50%);font-weight:800;font-size:1.1rem}
.pair-perf-diff{color:var(--insight-muted)}
.pair-perf-diff.pos{color:var(--insight-good)}
.pair-perf-diff.neg{color:var(--insight-bad)}
.insight-support-row{display:flex;align-items:center;justify-content:space-between;padding:.65rem .75rem;border-radius:12px;background:var(--insight-row);margin-bottom:.4rem;border:1px solid rgba(255,255,255,.03)}
.pill-row{display:flex;gap:.35rem}
.recap-insight-card .pill{padding:.18rem .5rem;border-radius:8px;font-size:.78rem;font-weight:700;border:1px solid transparent}
.recap-insight-card .pill.red{background:rgba(239,68,68,.12);color:var(--insight-bad);border-color:rgba(239,68,68,.24)}
.recap-insight-card .pill.green{background:rgba(34,197,94,.12);color:var(--insight-good);border-color:rgba(34,197,94,.24)}
.insight-progress{margin-top:.2rem;margin-bottom:1rem}
.progress-label{display:flex;justify-content:space-between;font-size:.88rem;color:inherit;margin-bottom:.35rem;font-weight:600}
.insight-progress-bg{height:8px;background:rgba(148,163,184,.25);border-radius:999px;overflow:hidden}
.insight-progress-fill{height:100%;background:var(--insight-warn);border-radius:999px;width:45%}
.insight-quote{margin-top:.4rem;font-size:.85rem;color:var(--insight-muted);font-style:italic}
.insight-stat-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.6rem;margin-bottom:.1rem}
.insight-stat-box{text-align:center;padding:.8rem .5rem;border-radius:12px;background:var(--insight-row);border:1px solid rgba(255,255,255,.04)}
.stat-val{display:block;font-weight:700}
.insight-stat-box .stat-val{font-size:1.15rem}
.stat-lbl{display:block;font-size:.82rem;color:var(--insight-muted)}
.stat-sub{display:block;font-size:.72rem;color:var(--insight-muted);margin-top:.1rem}
.insight-empty{font-size:.85rem;color:var(--insight-muted)}
.top-performer-bullet{display:flex;align-items:flex-start;gap:.45rem;margin-top:.7rem;color:var(--insight-muted);font-size:.9rem}
.tpb-icon{color:var(--insight-accent);margin-top:.05rem;flex-shrink:0}
.recap-insight.bullet-list{margin-top:.55rem}
@media(max-width:640px){
  .insight-card-title{align-items:flex-start}
  .recap-insight-grid{grid-template-columns:minmax(0,1fr)}
}
